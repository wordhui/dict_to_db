## ğŸ“£ ç®€ä»‹

1.ç”¨dictå¿«é€Ÿåˆ›å»ºSQLè¡¨ï¼Œæ–¹ä¾¿ç”¨Pythonåšä¸€äº›å°ç¨‹åºæ—¶ï¼Œå¯¹æ•°æ®å­˜å‚¨çš„çƒ¦åŠ³

```python
db.insert({"user":"å¼ ä¸‰","password":"1234","age":66})
"""
ä¸Šé¢è¯­å¥å°†ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®è¡¨ t1(è¡¨åå¯ä»¥äººå·¥æŒ‡å®š),å¹¶å°†è¿™æ¡è®°å½•ä¿å­˜åˆ°t1è¡¨ä¸­,å»ºè¡¨ç»“æ„å¦‚ä¸‹
crate table t1(user text,password text,age  integer)
"""
```

2.æ”¯æŒå°†å¸¸è§çš„Pythonæ•°æ®ç»“æ„ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå¦‚list,tuple,Pythonå¯¹è±¡ï¼Œdefå®šä¹‰çš„å‡½æ•°ç­‰

```python
insert_dict = {  # ä¸¾ä¾‹æ”¯æŒçš„æ•°æ®ç±»å‹
    'str': 'hello word',
    'int': 2,
    'float': 3.3,
    'datetime': datetime.datetime.now(),
    'list': [1, 2, 3],
    'dict': {"A": 1, "B": 2},
    'dict2': {1: '3', 4: '5'},
    'obj': object(),  # å¯¹è±¡æ˜¯æ”¯æŒä¿å­˜åˆ°æ•°æ®åº“çš„
    # 'func':  # def å®šä¹‰çš„å‡½æ•°æ˜¯æ”¯æŒä¿å­˜åˆ°æ•°æ®åº“çš„ï¼Œlambda å‡½æ•°æ˜¯ä¸æ”¯æŒçš„
}
```



3.å¯ä»¥å¿«é€Ÿå°†ç»“æ„ç®€å•Excelè¡¨æ•°æ®å¯¼å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°ç”¨SQLæŸ¥è¯¢Excel

**ã€æ–‡å­—ç®€ä»‹ã€‘**ï¼šdict_to_db æ˜¯ä¸€ä¸ªä¾¿æ·çš„å°†Python dictå¯¹è±¡ä¿å­˜åˆ°å…³ç³»å‹æ•°æ®åº“(ç°æ”¯æŒsqlite)çš„å·¥å…·,
è®©dictæ•°æ®ä¿å­˜åˆ°SQLiteæ•°æ®åº“åŒä½¿ç”¨MongoDBçš„ä¾¿æ·æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§,é€‚åˆå°é¡¹ç›®ï¼Œå•æœºé¡¹ç›®ï¼Œå°çˆ¬è™«ç­‰å¿«é€Ÿå¼€å‘ä½¿ç”¨ï¼Œå¹¶æä¾›äº†å‡ ä¸ªä¾¿æ·å°†Excelæ–‡ä»¶å¯¼å…¥æ•°æ®åº“çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°ç»“æ„ç®€å•çš„Excel
ç”¨SQLæŸ¥è¯¢Excelé‡Œé¢çš„æ•°æ®ï¼Œç„¶åå¯¼å‡ºæ–°çš„Excelæ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ³¨å†Œå‡½æ•°ï¼Œç”¨å‡½æ•°å¤„ç†Excelçš„æ•°æ®åå†å¯¼å‡ºæ•°æ®ï¼Œå®ç°æ›´ä¸°å¯Œçš„åŠŸèƒ½

## âœ¨ ç‰¹æ€§

* ç®€æ´æ˜äº†çš„APIè®¾è®¡ï¼Œå‡½æ•°åç§°å’ŒSQLè¯­æ³•ä¸€å®šç¨‹åº¦ç»Ÿä¸€ï¼Œæ–¹ä¾¿ä½¿ç”¨
* å¢åŠ æ›´å¤šæ–¹ä¾¿å¿«æ·çš„æ•°æ®æ’å…¥å‡½æ•°
    * insert_or_update
    * insert_or_replace
    * excel_to_db ä»Excelä¸­å¯¼å…¥æ•°æ®åˆ°æ•°æ®åº“
* æ›´å¤šæå‡å¼€å‘é€Ÿåº¦çš„å°åŠŸèƒ½
    * å¯ä»¥è‡ªåŠ¨ç»™æ’å…¥æ•°æ®æ·»åŠ æ’å…¥æ—¶é—´ï¼Œæ›´æ–°æ—¶é—´ç­‰
    * å¯ä»¥è‡ªåŠ¨ alter åˆå¹¶è¡¨ç»“æ„ï¼Œæ–¹ä¾¿ä¾¿æ·å¼€å‘
    * ä¾¿æ·çš„Excelå¤„ç†å‡½æ•°ï¼Œæ–¹ä¾¿ç”¨SQLæŸ¥è¯¢Excelæ–‡ä»¶å¹¶å¯¼å‡ºç»“æœ (ps:ç»“æ„è¿‡äºå¤æ‚çš„Excelä¸é€‚ç”¨)

## ğŸ”° å®‰è£…

```shell
$  pip install dict_to_db
```

## ğŸ“ ä½¿ç”¨

* ç®€å•å…¥é—¨

```python
import datetime

from dict_to_db import DictToDb

db = DictToDb('demo.db') # è¿æ¥demo.db æ•°æ®åº“æ–‡ä»¶ï¼Œæ²¡æœ‰åˆ™åˆ›å»º
insert_dict = { 
    'str': 'hello word',
    'int': 2,
    'float': 3.3,
    'datetime': datetime.datetime.now(),
    'list': [1, 2, 3],
    'dict': {"A": 1, "B": 2},
    'dict2': {1: '3', 4: '5'},
    'obj': object(),  # å¯¹è±¡æ˜¯æ”¯æŒä¿å­˜åˆ°æ•°æ®åº“çš„
    # 'func':  # def å®šä¹‰çš„å‡½æ•°æ˜¯æ”¯æŒä¿å­˜åˆ°æ•°æ®åº“çš„ï¼Œlambda å‡½æ•°æ˜¯ä¸æ”¯æŒçš„
}
# è¿™é‡Œä¼šè‡ªåŠ¨åˆ›å»ºtableï¼Œå¹¶å°†æ•°æ®ä¿å­˜åˆ°è¯¥table
db.insert(insert_dict)
result = db.select(table_name='t1')  # é»˜è®¤çš„è¡¨åä¸ºt1,ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¡¨å
print(result[0]['dict2'] == insert_dict['dict2'])  # True  åŸå§‹æ•°æ®ä¸æŸ¥è¯¢æ•°æ® ä¿æŒä¸€è‡´
"""
ä¸Šè¿°ä»£ç è‡ªåŠ¨åˆ›å»ºçš„æ•°æ®è¡¨ç»“æ„å¦‚ä¸‹ï¼š
CREATE TABLE t1 (
str text ,
int integer , 
float double , 
datetime timestamp ,
list json_text , 
dict json_text , 
obj obj 
)
"""
```

### è¿æ¥æ•°æ®åº“

* è¿æ¥æ•°æ®åº“æ–‡ä»¶

```python
db=DictToDb("demo.db") # è¿æ¥demo.dbæ•°æ®åº“
```



### è‡ªå®šä¹‰è¡¨å

```python
db.insert({"username":"å¼ ä¸‰",'age':66},table_name="user")# æ‰‹åŠ¨æŒ‡å®šè¡¨åä¸ºuser
```



### åˆ›å»ºè¡¨æ—¶ æ‰‹åŠ¨å®šä¹‰å­—æ®µç±»å‹å’Œå­—æ®µæè¿°ä¿¡æ¯

> å®šä¹‰å­—æ®µç±»å‹å’Œå­—æ®µæè¿°ä¿¡æ¯ï¼Œé€šè¿‡dict é‡Œé¢keyçš„åå­—æ¥å®šä¹‰ï¼Œ æ ¼å¼ä¸ºã€å­—æ®µå@å­—æ®µç±»å‹#å­—æ®µæè¿°ä¿¡æ¯ã€‘ï¼Œå…·ä½“è¯¦ç»†ä½¿ç”¨å¦‚ä¸‹

* åˆ›å»ºæ•°æ®è¡¨å¹¶æ‰‹åŠ¨æŒ‡å®šæ•°æ®ç±»å‹ ã€æ ¼å¼ï¼šå­—æ®µå@å­—æ®µç±»å‹ã€‘

```python
db.insert({"username":"å¼ ä¸‰",'age@text':66}) #æ‰‹åŠ¨æŒ‡å®šageç±»å‹ä¸ºtextï¼Œå¦‚ä¸æŒ‡å®šï¼Œç¨‹åºè‡ªåŠ¨åˆ¤æ–­ä¸ºinteger
```

* åˆ›å»ºæ•°æ®è¡¨å¹¶è®¾ç½®ä¸ºä¸»é”®ã€æ ¼å¼ï¼šå­—æ®µå#å­—æ®µæè¿°ä¿¡æ¯ï¼ˆå¦‚æ˜¯å¦æ˜¯ä¸»é”®ï¼Œdefaultå€¼ï¼Œæ˜¯å¦uniqueç­‰ï¼‰ã€‘

```python
db.insert({"username#pk":"å¼ ä¸‰",'age':66}) # æ‰‹åŠ¨æŒ‡å®šusernameå­—æ®µä¸ºä¸»é”®
```

* åˆ›å»ºæ•°æ®è¡¨è®¾ç½®è”åˆä¸»é”®

```python
# æ‰‹åŠ¨æŒ‡å®šusernameå’Œuser_idä¸ºè”åˆä¸»é”®
db.insert({"username#pk":"å¼ ä¸‰","user_id#pk":"66",'age':66}) 
# å®šä¹‰ä¸»é”®ä¹Ÿå¯ä»¥ä½¿ç”¨å…¨ç§° primary key  pkåªæ˜¯ç®€å†™
db.insert({"username#primary key": "å¼ ä¸‰", "user_id#primary key": "66", 'age': 66})
```

* åˆ›å»ºæ•°æ®è¡¨å¹¶ç»™å­—æ®µè®¾ç½®é»˜è®¤å€¼ã€æ ¼å¼ï¼šå­—æ®µå#default xxxã€‘

```python
db.insert({"username":"å¼ ä¸‰",'age#default 0':66}) # è®¾ç½®ageçš„é»˜è®¤å€¼ä¸º0
```

